/**
 * Editor-specific styles for the Weather Block.
 *
 * These styles are only applied in the block editor interface.
 */

/* Block Editor Container */
.weather-block-editor {
	position: relative;
	min-height: 100px;

	/* Focus styles for accessibility */
	&:focus-within {
		outline: 2px solid var(--wp-admin-theme-color, #007cba);
		outline-offset: 2px;
	}
}

/* Weather Block Preview in Editor */
.weather-block-preview {
	padding: 20px;
	border-radius: 8px;
	background: #f8f9fa;
	color: #212529;
	font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
	position: relative;
	transition: all 0.2s ease;

	/* Loading State */
	&.weather-block-loading {
		display: flex;
		flex-direction: column;
		align-items: center;
		justify-content: center;
		min-height: 120px;
		color: #666;

		.components-spinner {
			margin-bottom: 10px;
		}

		p {
			margin: 0;
			font-style: italic;
		}
	}

	/* Error State */
	&.weather-block-error {
		.components-notice {
			margin: 0;
		}
	}

	/* Placeholder State */
	&.weather-block-placeholder {
		display: flex;
		align-items: center;
		justify-content: center;
		min-height: 120px;
		border: 2px dashed #ccc;
		background: #fafafa;
		color: #666;

		p {
			margin: 0;
			font-style: italic;
		}
	}

	/* Content Layout */
	.weather-block-content {
		display: flex;
		align-items: flex-start;
		gap: 15px;
		margin-bottom: 15px;

		.weather-icon {
			flex-shrink: 0;

			img {
				display: block;
				border-radius: 4px;
				background: rgba(255, 255, 255, 0.1);
			}
		}

		.weather-main {
			flex: 1;
		}
	}

	/* Location Styling */
	.weather-location {
		margin-bottom: 10px;

		h3 {
			margin: 0 0 4px 0;
			font-size: 1.2em;
			font-weight: 600;
			line-height: 1.3;
		}

		.weather-country {
			font-size: 0.9em;
			opacity: 0.8;
			font-weight: 500;
		}
	}

	/* Temperature Display */
	.weather-temperature {
		margin-bottom: 8px;

		.temperature-current {
			font-size: 2.2em;
			font-weight: 700;
			line-height: 1;
			display: block;
			margin-bottom: 8px;
		}

		.temperature-range {
			display: flex;
			gap: 12px;
			margin-bottom: 4px;
			font-size: 0.9em;

			.temperature-min,
			.temperature-max {
				color: inherit;
				opacity: 0.8;
			}
		}

		.temperature-feels-like {
			font-size: 0.85em;
			opacity: 0.8;
			font-style: italic;
		}
	}

	/* Weather Description */
	.weather-description {
		font-size: 1em;
		font-weight: 500;
		margin-bottom: 5px;
		text-transform: capitalize;
	}

	/* Extended Details */
	.weather-details {
		display: grid;
		grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
		gap: 15px;
		padding: 15px 0;
		border-top: 1px solid rgba(0, 0, 0, 0.1);
		margin-top: 15px;

		.weather-detail {
			.detail-label {
				display: block;
				font-size: 0.8em;
				opacity: 0.7;
				font-weight: 500;
				margin-bottom: 2px;
			}

			.detail-value {
				display: block;
				font-size: 1em;
				font-weight: 600;
			}
		}
	}

	/* Current Mode Humidity */
	.weather-humidity {
		font-size: 0.9em;
		opacity: 0.8;
		margin-top: 8px;
	}

	/* Updated Time */
	.weather-updated {
		margin-top: 15px;
		padding-top: 10px;
		border-top: 1px solid rgba(0, 0, 0, 0.05);

		small {
			font-size: 0.75em;
			opacity: 0.6;
			font-style: italic;
		}
	}

	/* Extended Mode Specific Styling */
	&.weather-block-extended {
		.weather-block-content {
			margin-bottom: 10px;
		}

		.temperature-current {
			font-size: 2em;
		}
	}

	/* Dark Theme Support in Editor */
	.is-dark-theme & {
		background: #1e1e1e;
		color: #ffffff;

		.weather-details {
			border-top-color: rgba(255, 255, 255, 0.1);
		}

		.weather-updated {
			border-top-color: rgba(255, 255, 255, 0.05);
		}

		&.weather-block-placeholder {
			background: #2a2a2a;
			border-color: #444;
		}
	}

	/* High Contrast Mode Support */
	@media (prefers-contrast: high) {
		border: 2px solid currentColor;

		.weather-details {
			border-top: 2px solid currentColor;
		}

		.weather-updated {
			border-top: 2px solid currentColor;
		}
	}

	/* Reduced Motion Support */
	@media (prefers-reduced-motion: reduce) {
		transition: none;
	}

	/* Mobile Responsive Design in Editor */
	@media (max-width: 600px) {
		padding: 15px;

		.weather-block-content {
			flex-direction: column;
			align-items: center;
			text-align: center;
			gap: 10px;
		}

		.temperature-current {
			font-size: 1.8em !important;
		}

		.weather-details {
			grid-template-columns: 1fr;
			gap: 10px;
		}
	}
}

/* Inspector Controls Custom Styling */
.block-editor-block-inspector {
	.weather-block-color-panel {
		.components-base-control__field {
			display: flex;
			align-items: center;
			gap: 10px;
		}
	}
}

/* Block Controls Styling */
.block-editor-block-controls {
	.weather-block-mode-buttons {
		.components-button {
			&.is-pressed {
				background: var(--wp-admin-theme-color, #007cba);
				color: white;
			}
		}
	}
}

/* Focus Management for Accessibility */
.weather-block-editor {
	*:focus {
		outline: 2px solid var(--wp-admin-theme-color, #007cba);
		outline-offset: 2px;
	}

	button:focus,
	input:focus,
	select:focus {
		box-shadow: 
			0 0 0 1px var(--wp-admin-theme-color, #007cba),
			0 0 0 4px rgba(0, 124, 186, 0.2);
	}
}

/* Screen Reader Only Text */
.screen-reader-text {
	position: absolute !important;
	width: 1px !important;
	height: 1px !important;
	padding: 0 !important;
	margin: -1px !important;
	overflow: hidden !important;
	clip: rect(0, 0, 0, 0) !important;
	white-space: nowrap !important;
	border: 0 !important;
}

/* Loading Animation */
@keyframes weather-pulse {
	0%, 100% {
		opacity: 1;
	}
	50% {
		opacity: 0.5;
	}
}

.weather-block-loading {
	animation: weather-pulse 2s ease-in-out infinite;
}

/* Refresh Button Enhancements */
.weather-refresh-button {
	&:hover {
		background: rgba(0, 0, 0, 0.2) !important;
		transform: scale(1.1);
	}

	&:focus {
		outline: 2px solid var(--wp-admin-theme-color, #007cba);
		outline-offset: 2px;
	}

	&:disabled {
		cursor: not-allowed;
		opacity: 0.5 !important;
	}
}

/* Compact Mode Styles */
.weather-compact {
	.weather-block-content {
		flex-direction: column;
		align-items: center;
		text-align: center;
		gap: 8px;
	}

	.temperature-current {
		font-size: 1.8em !important;
	}

	.weather-details {
		grid-template-columns: 1fr;
		gap: 8px;
	}

	.weather-icon img {
		width: 40px;
		height: 40px;
	}
}

/* Error State Enhancement */
.weather-block-error {
	.components-notice {
		font-size: 0.9em;
		
		strong {
			color: #d63638;
		}
	}
}

/* Inspector Panel Enhancements */
.components-panel__body.is-opened .components-panel__body-title {
	.weather-block & {
		font-weight: 600;
	}
}

/* Tools Panel Custom Styling */
.components-tools-panel {
	.weather-block & {
		.components-tools-panel-item {
			margin-bottom: 16px;
		}

		.components-tools-panel__dropdown-menu {
			.components-button {
				width: 100%;
				justify-content: flex-start;
			}
		}
	}
}
